\subsection{I²C}

% I²C Abkürzung erklären

I²C basiert auf einem Bussystem.
Dies bedeutet, dass alle Komponenten, die miteinander kommunizieren sollen, an einer oder mehreren gemeinsamen Leitungen anliegen.
Der I²C-Bus besteht aus zwei Leitungen.
Die Datenleitung wird \abbrevtt{SDA}{serial data line} und die Taktleitung wird \abbrevtt{SCL}{serial clock line} genannt.

Alle Daten, die versendet werden, sind in Bytes aufgeteilt.
Jedes Bit wird nacheinander in \abbrev{MSB}{most significant bit}[\itshape]-Bitreihenfolge auf die Datenleitung geschrieben.

Um eine bestimmte Komponente über den Bus ansprechen zu können, benötigt jede Komponente eine eindeutige Adresse, welche von den Herstellern zugewiesen wird.

Zudem wird zur Kommunikation das \texttt{Controller}/\texttt{Target}-Prinzip verwendet.
Die sogenannten \texttt{Controller} sind Komponenten, die eine Kommunikation mit einer anderen Komponente initiieren können.
Sogenannte \texttt{Targets} sind Komponenten, die von einem \texttt{Controller} angesprochen werden können.
Der \texttt{Controller} einer Kommunikation entscheidet außerdem, ob er einem \texttt{Target} Daten senden oder bestimmte Daten von diesem anfordern möchte.
Während der Kommunikation generiert immer der \texttt{Controller} den Takt, welcher über die Taktleitung verteilt wird.

Im Weiteren wird davon ausgegangen, dass nur ein Controller am Bus angeschlossen ist.

Um eine Kommunikation zu starten, sendet der \texttt{Controller} eine Startanweisung, die 7-Bit Adresse des \texttt{Targets} und ein Bit, welches beschreibt, ob der \texttt{Controller} Daten schreiben oder anfordern möchte.
Eine Startanweisung ist definiert als eine fallende Flanke auf der Datenleitung, während die Taktleitung auf \texttt{HIGH} steht.
Wenn der \texttt{Target} seine Adresse wiedererkannt hat, bestätigt er den Aufbau der Kommunikation durch ein sogenanntes \texttt{Acknowledge}.
Damit der Empfang eines Bytes bestätigt werden kann, gibt der Sender die Datenleitung frei und der Empfänger setzt diese auf \texttt{LOW}.

Wenn der \texttt{Controller} Daten anfordern möchte, wird dieser nach dem \texttt{Acknowledge} zum Empfänger und der \texttt{Target} zum Sender.
Sobald der Kommunikationsaufbau bestätigt wurde, fängt der Sender mit dem nächsten Taktzyklus an die einzelnen Bytes über den Bus zu versenden.
Hierbei wird vom Empfänger nach jedem Byte eine Empfangsbestätigung generiert.

Um die Kommunikation zu beenden, sendet der \texttt{Controller} entweder eine Anweisung zur Beendigung der Kommunikation oder eine erneute Startanweisung.
Eine Anweisung zur Beendigung der Kommunikation ist definiert als eine steigende Flanke auf der Datenleitung, während die Taktleitung auf \texttt{HIGH} steht.
Eine erneute Startanweisung fasst das Ende der laufenden und den Start einer neuen Kommunikation zusammen.
Das Senden einer erneuten Startanweisung wird bevorzugt, wenn der \texttt{Controller} den Schreibmodus in den Lesemodus oder umgekehrt ändern möchte.

\cite{I2C-spec_userManual}
